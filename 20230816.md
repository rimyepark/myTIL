## TIL: ERD(Entity-Relationship Diagram) 작성하기

1. ERD란?
ERD(Entity-Relationship Diagram)는 데이터베이스의 구조와 관계를 시각적으로 나타내는 도구이다. 엔티티(Entity)와 엔티티 간의 관계(Relationship)를 표현하여 데이터베이스의 논리적 구조를 이해하고 설계할 수 있도록 도와준다.

2. ERD 요소
엔티티(Entity): 데이터베이스 내에서 저장되는 개별 항목 또는 객체를 나타낸다. 테이블에 해당하는 개념으로, 속성(Attribute)을 가질 수 있다.

속성(Attribute): 엔티티가 가지는 특성이나 정보를 나타낸다. 예를 들어, "이름", "나이" 등이 될 수 있다.

관계(Relationship): 엔티티 간의 관계를 표현한다. 일대일, 일대다, 다대다 등의 관계를 표시할 수 있다.

3. ERD 작성 단계
요구사항 분석: 시스템의 요구사항을 분석하여 어떤 엔티티와 관계가 필요한지 파악한다.

엔티티 식별: 요구사항에서 식별된 엔티티를 정의하고 각 엔티티의 속성을 결정한다.

관계 정의: 엔티티 간의 관계를 정의하고 관계의 종류와 특성을 결정한다.

ERD 작성: 선택한 도구(예: ERD 도구 또는 그림 그리기 도구)를 사용하여 엔티티, 속성 및 관계를 시각적으로 작성한다.

정규화: 데이터 중복과 이상(Anomaly)을 최소화하기 위해 ERD를 정규화하고 최적화한다.

4. ERD 주요 장점
- 시스템 구조와 데이터 흐름을 시각적으로 이해할 수 있어 설계 과정을 용이하게 한다.
- 데이터베이스 구조 변경 시 영향을 파악하고 관리할 수 있어 유지 보수가 용이하다.
- 개발자, 디자이너, 클라이언트 간 의사 소통을 쉽게 돕는다.

지난 조에서 ERD 작성에 대한 중요점을 꺠닫고 이번 조에서는 ERD 작성에 많은 시간을 보냈다. 이번 조에서 정한 프로젝트는 화상채팅, 드로잉으로 과외를 하는 '실시간 웹 티칭  과외 서비스' 이다. 해당 프로젝트의 ERD 를 짜면서 궁금했던 점들을 나열해서 튜터님께 찾아가 피드백을 듣고 ERD 를 수정하였다.

이번 프로젝트때 ERD 를 작성하면서 가장 많은 난항을 겪은것은 화상 채팅에 대한 ERD 였다. 처음에는 채팅의 내용을 저장하고 싶지 않아 테이블을 작성하지 않기로 했지만 여러 요건을 고려한 결과 테이블을 작성하고 채팅 내용을 테이블에 저장하는 것이 더 낫다고 판단을 해서 테이블을 만들기로 했다. 그리고 테이블을 만들면서 어려움을 겪었다.

처음에는 테이블 한개만 만들었는데 구글링을 해본 결과 채팅을 할때 쓰는 테이블은 3개 정도가 되었다.

Users 테이블

user_id	/username	/email	/password_hash

Chatrooms 테이블

room_id	/name	/created_at

Messages 테이블

message_id	/room_id	/user_id	/message	/timestamp

처음에는 테이블 한개를 만들었는데 저장할 내용이 상당히 많아서 당황했다. 이게 맞는건가 싶어서 튜터님께 가서 질문을 하니 튜터님은 여러가지 방법을 제시해주셨다. 그중 하나는 몽고디비에 메세지를 저장하고 오브젝트 아이디로 받아오는 형식으로 한 다음에 테이블에는 userId 와 roomId 를 넣는 방식이다. 요즘 계속해서 RDBMS 만 사용해서 몽고디비 같은 NoSQL을 사용하는 방법이 있다는 것을 잊고 있었다. 두가지의 데이터 저장 방식을 사용하여 더 효율적으로 로직을 짜고 불러 올 수 있다는 방법이 있다는 것을 깨달았다.


