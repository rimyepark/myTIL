## ERD 수정

오늘 튜터님께서 오셔서 피드백을 해주셨다. 피드백중 가장 우선시 되는 피드백은 역시 ERD 관련된 피드백이었다.

![최종프로젝트](https://github.com/rimyepark/myTIL/assets/133215556/c939bb73-2367-4ce9-a6bd-eb72303fe9e8)

해당 ERD를 만들면서 의문점이 많았다. 그중 두가지를 꼽자면

1. 채팅에 관련된 ERD를 저렇게 작성해도 될까?

다른 튜터님의 피드백을 받았을때 그 튜터님께서는 userID 값과 채팅룸의ID 값을 저장하는 테이블만 만들고 채팅방의 내용은 몽고디비에 저장하라고 하셨다. 담당 튜터님은 어떤 방법을 추천할지 궁금했다.

2. 관리자와 신고, 그리고 유저 테이블의 관계에 대해서 궁금했다. 검색을 했을때 나오는 답이 조금씩 달랐다. 관리자를 한명으로 뒀을때는 어떨까 만약 관리자가 여러명이라면 어떨까? 

 이 두가지 문제로 고민을 했는데 튜터님께서는 의외의 곳에서 지적을 하셨다.

 1. user 테이블에 있는 튜터 정보 테이블과 학생 정보 테이블의 관계가 잘못되었다. 반대가 되어야 한다. 라고 하셨다. 하지만 user 에서 학생과 튜터의 키 값을 가져야 하지 않느냐 라고 내가 질문을 하자 이런 방식도 나쁘지 않지만 이렇게 만들면 유저 없는 학생과 유저 없는 선생이 만들어진다고 했다. 또한 학생과 튜터 ID 값 없이 유저를 생성하지 못한다는 피드백을 주셨다. 그 말에 내가 오늘 마이그레이션을 만들때가 생각나서 당황했다. 생각해보니 내가 오늘 마이그레이션 테이블을 생성할때 유저가 아닌 튜터와 학생의 정보가 최상단에 있었다. 내가 매우 잘못 생각하고 있었다는 것을 깨달았다.

 2. 즐겨찾기와 유저의 관계가 다대 다가 아닌 1대 다 라고 하셨다. 다대 다로 연결하기 위해서 만든 중간 테이블을 보시더니 나쁘진 않다고 하셨으나 굳이 이렇게 만들 필요가 없다고 하셨다. 다시보니 Mark 테이블에서도 딱히 들어가는 내용이 없었기에 Mark 테이블을 삭제하는 것이 더 효율적이라는 사실을 깨달았다.

 3. 관리자와 유저 관계를 유지할 필요가 없다고 하셨다. 내가 만든 테이블에는 유저와 관리자가 1대 다 관계를 가진다고 생각해서 유저 테이블과 관리자를 1대 다로 연결했는데 그러다 보니 관리자의 키 값을 유저가 갖고 있었다. 이부분에 대해서 지적을 하며 신고의 내용 안에 유저 값이 들어간다고 하며 굳이 유저 테이블과 관리자 테이블을 연결할 필요가 없다고 말했다. 연결된 테이블을 보니 이미 연결된 신고 테이블에서 유저 정보가 같이 연결되서 들어오고 있었다.

 4. 이 부분은 의외였다. 가장 많은 이야기를 하실 줄 알았던 채팅 부분에서는 별말씀이 없으셨다. 내가 다른 튜터님께 받은 피드백을 설명하며 튜터님께 생각을 물었을때 튜터님께서는 그 방법이 좋을 것 같다고 말씀 하셨다. 심지어 룸 ID 값도 필요 없을 것 같다고 하셨다. 유저 아이디 값만으로 채팅 내용을 불러올 수 있다고 하셨다. 하지만 내가 그렇게 된다면 같은 유저 둘이 매칭 됐을떄 원하는 대화를 찾으려면 힘들어진다고 말하자 룸 ID 값은 필요하겠다고 말씀하셨다. 대신 채팅방 나가기 기능을 위해 status 를 넣으라고 하셨다.

 그 외에도 ERD 를 만들며 궁금했던 자잘한 질문에도 튜터님께서는 친절하게 답변을 해주셨다. 정말로 유익한 시간이었다. 덕분에 ERD 에 대한 이해도가 올라갔고 이번 프로젝트의 기반을 단단하게 쌓은 것 같아서 안도가 되었다.