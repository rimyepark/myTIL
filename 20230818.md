## ERD 최종

![최종프로젝트 (1)](https://github.com/rimyepark/myTIL/assets/133215556/be692025-cd11-44b9-969f-9f838b60e2fc)

튜터님과의 피드백으로 만들어진 ERD 의 최종본이다. ERD 를 연속으로 세번 쓴 것은 그만큼 이번 프로젝트를 하면서 ERD의 중요성을 깨달았기 때문이다.

1. 학생 정보 테이블 제거와 튜터 정보 테이블 연결을 바꿨다. 전에는 유저가 튜터의 정보 키값을 가졌지만 이것은 잘못된거라 배운 뒤 튜터가 유저의 키값을 가지도록 변경했다. 학생 인증은 필요 없다고 판단했다. 미성년자가 아닌 학생도 있을 수 있고 미성년자지만 학교에 다니지 않을 수도 있기 때문에 학생인증은 특별히 하지 않는 방향으로 바꾸고 대신 튜터만 인증을 하도록 만들었다.

2. Mark 테이블 삭제. 기존에 특별히 키 값을 가지고 있지 않은 Mark 테이블을 지우고 유저 즐겨찾기는 유저와 즐겨찾기의 일대 다 관계로 수정하였다.

3. 화상 채팅 테이블 생성. 이때까지 이번 프로젝트가 화상 드로잉 티칭 서비스이기 때문에 화상 채팅만 필요한 줄 알았는데 팀원들과 대화해본 결과 일반 채팅의 필요성도 느꼈다. 그래서 일반 채팅 테이블과 화상 채팅 테이블을 분리하였다. 

이렇게 ERD를 짜고  API 명세서를 작성하니 필요한 것이 한 눈에 보였다. 먼저 내가 맡은 화상채팅 부분에서는 채팅 초대와 채팅 초대 수락, 초대 거부 부분을 만들어야한다는 의견이 나왔다. 일반 채팅과 다르게 화상채팅은 서로의 얼굴을 보여주는 것이기 때문에 채팅의 수락 부분이 필요하다는 의견이 나왔다. 그래서 테이블에 대해 다시 고민을 했다. 초대 API 를 만들고 초대에 수락후에 room 이 만들어지면 테이블이 두개가 필요하기 때문이다. 거절한 초대도 데이터에 남으면 엄청난 데이터 손실일 것이기에 내가 생각한 것은 초대를 API 가 아닌 프론트에서 처리를 하고 테이블을 한개 만들어 수락 버튼을 누르는 순간 테이블이 만들어지고 거부버튼을 누르면 메세지가 전송이 되도록  하는 것이였다. 이것에 대해 의견을 서로 나누다가 튜터님을 찾아가서 어느 방법이 더 좋은지, 또한 어떤 방법을 추천할지에 대해서 질문을 했다. 튜터님께서도 데이터 손실을 막는 후자의 방법을 선택하셨다. 그리고 프론트 내에 이벤트 리스너로 초대를 처리하고 소켓 io를 사용하라고 하셨다.

드디어 ERD 작성을 끝마치게 됐다. 아직도 엉성하고 부족한 부분이 보였지만 틀 자체는 괜찮게 만들어졌기 때문에 이대로 진행하고 만약 진행 중 추가 하고 싶은 것이나 삭제하고 싶은 부분이 생긴다면 팀 회의를 거쳐서 ERD를 수정하는 방법으로 가려고 한다. 남은 시간 동안 프로젝트에 집중하며 실력을 기르겠다.